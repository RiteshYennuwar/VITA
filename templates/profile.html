{% extends "base.html" %}
{% block title %}Profile{% endblock %}
{% block content %}

<section class="profile-section">
    <h1>Profile</h1>
    <div class="form-container">
        <!-- Display User Details -->
        <div id="profile-view">
            <p><strong>Username:</strong> {{ user['username'] }}</p>
            <p><strong>First Name:</strong> {{ user['first_name'] }}</p>
            <p><strong>Last Name:</strong> {{ user['last_name'] }}</p>
            <p><strong>Email:</strong> {{ user['email'] }}</p>
            <button id="edit-profile-btn" class="edit-btn">Edit Profile</button>
        </div>

        <!-- Edit User Details Form -->
        <form id="profile-edit-form" action="{{ url_for('update_profile') }}" method="POST" style="display: none;">
            <p><strong>Username:</strong> {{ user['username'] }}</p>

            <label for="first_name">First Name:</label>
            <input type="text" id="first_name" name="first_name" value="{{ user['first_name'] }}" required>

            <label for="last_name">Last Name:</label>
            <input type="text" id="last_name" name="last_name" value="{{ user['last_name'] }}" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="{{ user['email'] }}" required>

            <button type="submit" class="update-btn">Update Profile</button>
            <button type="button" id="cancel-edit-btn" class="cancel-btn">Cancel</button>
        </form>
    </div>
</section>

<script>
    document.getElementById('edit-profile-btn').addEventListener('click', function() {
        document.getElementById('profile-view').style.display = 'none';
        document.getElementById('profile-edit-form').style.display = 'block';
    });

    document.getElementById('cancel-edit-btn').addEventListener('click', function() {
        document.getElementById('profile-view').style.display = 'block';
        document.getElementById('profile-edit-form').style.display = 'none';
    });
</script>

{% endblock %}